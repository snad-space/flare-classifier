schema: '2.0'
stages:
  prepare_datasets:
    cmd: python src/flare_classifier/prepare_datasets.py data/light-curves/generated_1m_cleaned.parquet
      data/light-curves/lc_1M.parquet
    deps:
    - path: data/light-curves/generated_1m_cleaned.parquet
      md5: c5189eff1fbb76d19c27973b2e34a0c0
      size: 508424020
    - path: data/light-curves/lc_1M.parquet
      md5: ad6651a6b602cfdef7e8baa8ed775d1e
      size: 1005283880
    - path: src/flare_classifier/prepare_datasets.py
      md5: 6bb9a2a4f799c2b90d6e2d72e08e1081
      size: 1792
    params:
      params.yaml:
        prepare_datasets.seed: 221
        prepare_datasets.test_size: 0.15
        prepare_datasets.train_size: 0.75
    outs:
    - path: data/prepared
      md5: 4279395312718d86135704a32c1890c5.dir
      size: 1150531595
      nfiles: 5
  train_rf:
    cmd: python src/flare_classifier/train_rf.py data/prepared
    deps:
    - path: data/prepared/feature_names.csv
      md5: c11a4b614257ee8136a5c043f363018d
      size: 544
    - path: data/prepared/train.parquet
      md5: b0ec1f965f06dbd88ced2c03c715b6d2
      size: 863256885
    - path: src/flare_classifier/prepare_datasets.py
      md5: 6bb9a2a4f799c2b90d6e2d72e08e1081
      size: 1792
    - path: src/flare_classifier/train_rf.py
      md5: f5a38ff857ad475339c29596bb8001a3
      size: 1049
    params:
      params.yaml:
        train_rf.n_estimators: 100
        train_rf.seed: 42
    outs:
    - path: models/random_forest/random_forest.pickle
      md5: 54bb0a6f9fb68b6fcc680a9a7e935190
      size: 404177920
  train_catboost:
    cmd: python src/flare_classifier/train_catboost.py data/prepared/
    deps:
    - path: data/prepared/feature_names.csv
      md5: c11a4b614257ee8136a5c043f363018d
      size: 544
    - path: data/prepared/train.parquet
      md5: b0ec1f965f06dbd88ced2c03c715b6d2
      size: 863256885
    - path: src/flare_classifier/prepare_datasets.py
      md5: 6bb9a2a4f799c2b90d6e2d72e08e1081
      size: 1792
    - path: src/flare_classifier/train_catboost.py
      md5: 5e8ad212b1bb049eb7e8477ed93ea40b
      size: 1164
    params:
      params.yaml:
        train_catboost.depth: 5
        train_catboost.iterations: 10000
        train_catboost.learning_rate: 0.01
        train_catboost.loss_function: Logloss
        train_catboost.seed: 42
    outs:
    - path: models/catboost/catboost.pickle
      md5: 438d788875e421f36fafead8a7747550
      size: 5626641
  train_mlp:
    cmd: python src/flare_classifier/train_mlp.py data/prepared/
    deps:
    - path: data/prepared/feature_names.csv
      md5: c11a4b614257ee8136a5c043f363018d
      size: 544
    - path: data/prepared/train.parquet
      md5: b0ec1f965f06dbd88ced2c03c715b6d2
      size: 863256885
    - path: data/prepared/val.parquet
      md5: be0fe2161b6f0d0eab1d72a6f3494990
      size: 104890185
    - path: src/flare_classifier/mlp_model.py
      md5: 43587811c5951e16b0052b1c7e7ad3fc
      size: 1497
    - path: src/flare_classifier/prepare_datasets.py
      md5: 6bb9a2a4f799c2b90d6e2d72e08e1081
      size: 1792
    - path: src/flare_classifier/train_mlp.py
      md5: e6375db2a4653c6d10fa13e1b2e95d23
      size: 4078
    params:
      params.yaml:
        train_mlp.batch_size: 1024
        train_mlp.lr: 0.001
        train_mlp.num_epochs: 150
    outs:
    - path: models/mlp/mlp.pickle
      md5: b8e93a34f8c73ae8f395ab8c49f0d5b2
      size: 895931
  evaluate_rf:
    cmd: python src/flare_classifier/evaluate_rf.py models/random_forest/random_forest.pickle
      data/prepared/
    deps:
    - path: data/prepared/test.parquet
      md5: 97bf9da893cfb485f4462a45b6d110b3
      size: 182382966
    - path: data/prepared/train.parquet
      md5: b0ec1f965f06dbd88ced2c03c715b6d2
      size: 863256885
    - path: models/random_forest/random_forest.pickle
      md5: 54bb0a6f9fb68b6fcc680a9a7e935190
      size: 404177920
    - path: src/flare_classifier/evaluate_rf.py
      md5: 1cff02ac42e6d8d3aeb3bc4dcf20035a
      size: 1065
    - path: src/flare_classifier/train_rf.py
      md5: f5a38ff857ad475339c29596bb8001a3
      size: 1049
    outs:
    - path: metrics/random_forest/test_metrics.json
      md5: f2b23db24720ceefa1aaa93d807613b8
      size: 135
    - path: metrics/random_forest/train_metrics.json
      md5: 02dd594097b0789c60a62e3ae2ef0621
      size: 136
  evaluate_catboost:
    cmd: python src/flare_classifier/evaluate_catboost.py models/catboost/catboost.pickle
      data/prepared/
    deps:
    - path: data/prepared/test.parquet
      md5: 97bf9da893cfb485f4462a45b6d110b3
      size: 182382966
    - path: data/prepared/train.parquet
      md5: b0ec1f965f06dbd88ced2c03c715b6d2
      size: 863256885
    - path: models/catboost/catboost.pickle
      md5: 438d788875e421f36fafead8a7747550
      size: 5626641
    - path: src/flare_classifier/evaluate_catboost.py
      md5: c70376eb8733634cd788e6978e6e2603
      size: 1055
    - path: src/flare_classifier/train_catboost.py
      md5: 5e8ad212b1bb049eb7e8477ed93ea40b
      size: 1164
    outs:
    - path: metrics/catboost/test_metrics.json
      md5: f77fe61abe1dbe4f2f3c2a3b3b964917
      size: 136
    - path: metrics/catboost/train_metrics.json
      md5: 49eedb6324de25a2ea625567ea63210e
      size: 133
  evaluate_mlp:
    cmd: python src/flare_classifier/evaluate_mlp.py models/mlp/mlp.pickle data/prepared/
    deps:
    - path: data/prepared/test.parquet
      md5: 97bf9da893cfb485f4462a45b6d110b3
      size: 182382966
    - path: data/prepared/train.parquet
      md5: b0ec1f965f06dbd88ced2c03c715b6d2
      size: 863256885
    - path: models/mlp/mlp.pickle
      md5: b8e93a34f8c73ae8f395ab8c49f0d5b2
      size: 895931
    - path: src/flare_classifier/evaluate_mlp.py
      md5: 0d06703d3e5f12ee7867a4938b47eff0
      size: 1950
    - path: src/flare_classifier/train_mlp.py
      md5: e6375db2a4653c6d10fa13e1b2e95d23
      size: 4078
    outs:
    - path: metrics/mlp/test_metrics.json
      md5: f5267ba207601df358378742d3824d84
      size: 128
    - path: metrics/mlp/train_metrics.json
      md5: bbf1a34bf529aecb4cb6e32f705c0afc
      size: 129
