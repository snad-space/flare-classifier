schema: '2.0'
stages:
  prepare_datasets:
    cmd: python src/flare_classifier/prepare_datasets.py data/light-curves/generated_1m_cleaned.parquet
      data/light-curves/lc_1M.parquet
    deps:
    - path: data/light-curves/generated_1m_cleaned.parquet
      md5: c5189eff1fbb76d19c27973b2e34a0c0
      size: 508424020
    - path: data/light-curves/lc_1M.parquet
      md5: ad6651a6b602cfdef7e8baa8ed775d1e
      size: 1005283880
    - path: src/flare_classifier/prepare_datasets.py
      md5: 09e0f658301e0750901d23a6a4e19226
      size: 1592
    params:
      params.yaml:
        prepare_datasets.seed: 221
        prepare_datasets.test_size: 0.15
        prepare_datasets.train_size: 0.75
    outs:
    - path: data/prepared
      md5: ea7ceb516c35c5e0faa6db1f4ba69cb2.dir
      size: 1150530580
      nfiles: 4
  train_rf:
    cmd: python src/flare_classifier/train_rf.py data/prepared
    deps:
    - path: data/prepared/feature_names.csv
      md5: c11a4b614257ee8136a5c043f363018d
      size: 544
    - path: data/prepared/train.parquet
      md5: eb924af9d29f2894ca85f485e68d84f8
      size: 863256885
    - path: src/flare_classifier/prepare_datasets.py
      md5: 09e0f658301e0750901d23a6a4e19226
      size: 1592
    - path: src/flare_classifier/train_rf.py
      md5: f5a38ff857ad475339c29596bb8001a3
      size: 1049
    params:
      params.yaml:
        train_rf.n_estimators: 100
        train_rf.seed: 42
    outs:
    - path: models/random_forest/random_forest.pickle
      md5: 42fab7b3aef3ea6f7aa2deb4b5811cd5
      size: 404177920
  train_catboost:
    cmd: python src/flare_classifier/train_catboost.py data/prepared/
    deps:
    - path: data/prepared/feature_names.csv
      md5: c11a4b614257ee8136a5c043f363018d
      size: 544
    - path: data/prepared/train.parquet
      md5: eb924af9d29f2894ca85f485e68d84f8
      size: 863256885
    - path: src/flare_classifier/prepare_datasets.py
      md5: 09e0f658301e0750901d23a6a4e19226
      size: 1592
    - path: src/flare_classifier/train_catboost.py
      md5: 5e8ad212b1bb049eb7e8477ed93ea40b
      size: 1164
    params:
      params.yaml:
        train_catboost.depth: 5
        train_catboost.iterations: 10000
        train_catboost.learning_rate: 0.01
        train_catboost.loss_function: Logloss
        train_catboost.seed: 42
    outs:
    - path: models/catboost/catboost.pickle
      md5: 0485fed8111c9da6d2403eee46770c1d
      size: 5627081
  train_mlp:
    cmd: python src/flare_classifier/train_mlp.py data/prepared/
    deps:
    - path: data/prepared/feature_names.csv
      md5: c11a4b614257ee8136a5c043f363018d
      size: 544
    - path: data/prepared/train.parquet
      md5: eb924af9d29f2894ca85f485e68d84f8
      size: 863256885
    - path: data/prepared/val.parquet
      md5: 026bc10550d7747867a751abe846299a
      size: 104890185
    - path: src/flare_classifier/mlp_model.py
      md5: 59d6d7c6934a0d2954e83a955f8ea86a
      size: 1415
    - path: src/flare_classifier/prepare_datasets.py
      md5: 09e0f658301e0750901d23a6a4e19226
      size: 1592
    - path: src/flare_classifier/train_mlp.py
      md5: 1609be05d55333b322a873bcf92b81ea
      size: 3499
    params:
      params.yaml:
        train_mlp.batch_size: 1024
        train_mlp.lr: 0.001
        train_mlp.num_epochs: 50
    outs:
    - path: models/mlp/mlp.pickle
      md5: c19a81277060ecc4b525c3486bca3b29
      size: 908512
  evaluate_rf:
    cmd: python src/flare_classifier/evaluate_rf.py models/random_forest/random_forest.pickle
      data/prepared/
    deps:
    - path: data/prepared/test.parquet
      md5: d5f2ff1becd0404f46fbd4fe10c21a6d
      size: 182382966
    - path: data/prepared/train.parquet
      md5: eb924af9d29f2894ca85f485e68d84f8
      size: 863256885
    - path: models/random_forest/random_forest.pickle
      md5: 42fab7b3aef3ea6f7aa2deb4b5811cd5
      size: 404177920
    - path: src/flare_classifier/evaluate_rf.py
      md5: 2fd1637edeea47be47a6cc784615400e
      size: 1064
    - path: src/flare_classifier/train_rf.py
      md5: f5a38ff857ad475339c29596bb8001a3
      size: 1049
    outs:
    - path: metrics/random_forest/test_metrics.json
      md5: f2b23db24720ceefa1aaa93d807613b8
      size: 135
    - path: metrics/random_forest/train_metrics.json
      md5: 02dd594097b0789c60a62e3ae2ef0621
      size: 136
  evaluate_catboost:
    cmd: python src/flare_classifier/evaluate_catboost.py models/catboost/catboost.pickle
      data/prepared/
    deps:
    - path: data/prepared/test.parquet
      md5: d5f2ff1becd0404f46fbd4fe10c21a6d
      size: 182382966
    - path: data/prepared/train.parquet
      md5: eb924af9d29f2894ca85f485e68d84f8
      size: 863256885
    - path: models/catboost/catboost.pickle
      md5: 0485fed8111c9da6d2403eee46770c1d
      size: 5627081
    - path: src/flare_classifier/evaluate_catboost.py
      md5: c54a83ce1a907b321673c2a5c9fa74a7
      size: 1054
    - path: src/flare_classifier/train_catboost.py
      md5: 5e8ad212b1bb049eb7e8477ed93ea40b
      size: 1164
    outs:
    - path: metrics/catboost/test_metrics.json
      md5: 5c759bd45c46f05bf0c369ae9cf0deef
      size: 136
    - path: metrics/catboost/train_metrics.json
      md5: 47004d86f5cad84a46e39ef41b1fdd6a
      size: 136
  evaluate_mlp:
    cmd: python src/flare_classifier/evaluate_mlp.py models/mlp/mlp.pickle data/prepared/
    deps:
    - path: data/prepared/test.parquet
      md5: d5f2ff1becd0404f46fbd4fe10c21a6d
      size: 182382966
    - path: data/prepared/train.parquet
      md5: eb924af9d29f2894ca85f485e68d84f8
      size: 863256885
    - path: models/mlp/mlp.pickle
      md5: c19a81277060ecc4b525c3486bca3b29
      size: 908512
    - path: src/flare_classifier/evaluate_mlp.py
      md5: 7e71eb9313be8925280c000eaa96b9b9
      size: 1832
    - path: src/flare_classifier/train_mlp.py
      md5: 1609be05d55333b322a873bcf92b81ea
      size: 3499
    outs:
    - path: metrics/mlp/test_metrics.json
      md5: aa22ac98ba4b27afc5ca416f3cd32ecb
      size: 128
    - path: metrics/mlp/train_metrics.json
      md5: 8a7ec9e3acd2b6571c7349d668fef9c2
      size: 129
