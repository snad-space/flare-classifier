schema: '2.0'
stages:
  prepare_datasets:
    cmd: python src/flare_classifier/prepare_datasets.py data/light-curves/positive_demo.csv
      data/light-curves/negative_demo.csv
    deps:
    - path: data/light-curves/negative_demo.csv
      md5: 144cbe94595067d720cdcd5883c30e56
      size: 15540683
    - path: data/light-curves/positive_demo.csv
      md5: d2564be1047a74560f51f64da84cb3b9
      size: 9818769
    - path: src/flare_classifier/prepare_datasets.py
      md5: 9e5becc6bad1d41590dcb599823f2539
      size: 1705
    params:
      params.yaml:
        prepare_datasets.seed: 221
        prepare_datasets.test_size: 0.15
        prepare_datasets.train_size: 0.75
    outs:
    - path: data/prepared
      md5: 6fce544f940afbfd0cdbc31e69e12e19.dir
      size: 15458858
      nfiles: 5
  train_rf:
    cmd: python src/flare_classifier/train_rf.py data/prepared
    deps:
    - path: data/prepared/feature_names.csv
      md5: 096f54a8fffd95fdbc56e763ad69f4f2
      size: 519
    - path: data/prepared/train.parquet
      md5: b61cc38b97c5fa5a5d8c3159881b4d50
      size: 11172253
    - path: src/flare_classifier/prepare_datasets.py
      md5: 9e5becc6bad1d41590dcb599823f2539
      size: 1705
    - path: src/flare_classifier/train_rf.py
      md5: 9f2cc06022f46bf2ed731ccee4fa39a7
      size: 1019
    params:
      params.yaml:
        train_rf.n_estimators: 100
        train_rf.seed: 42
    outs:
    - path: models/random_forest/random_forest.pickle
      md5: 8ca4eb1b14d9bc2a0b5667eb492cf4c7
      size: 6932370
  train_catboost:
    cmd: python src/flare_classifier/train_catboost.py data/prepared/
    deps:
    - path: data/prepared/feature_names.csv
      md5: 096f54a8fffd95fdbc56e763ad69f4f2
      size: 519
    - path: data/prepared/train.parquet
      md5: b61cc38b97c5fa5a5d8c3159881b4d50
      size: 11172253
    - path: src/flare_classifier/prepare_datasets.py
      md5: 9e5becc6bad1d41590dcb599823f2539
      size: 1705
    - path: src/flare_classifier/train_catboost.py
      md5: bc305b7544427c9b0d4887e7e83d6d4c
      size: 1539
    params:
      params.yaml:
        train_catboost.depth: 5
        train_catboost.iterations: 10000
        train_catboost.learning_rate: 0.001
        train_catboost.loss_function: Logloss
        train_catboost.seed: 42
    outs:
    - path: models/catboost/catboost.pickle
      md5: 01bc42abaab236acb59a0b2aeb370138
      size: 3706978
  train_mlp:
    cmd: python src/flare_classifier/train_mlp.py data/prepared/
    deps:
    - path: data/prepared/feature_names.csv
      md5: 096f54a8fffd95fdbc56e763ad69f4f2
      size: 519
    - path: data/prepared/train.parquet
      md5: b61cc38b97c5fa5a5d8c3159881b4d50
      size: 11172253
    - path: data/prepared/val.parquet
      md5: 26e5537a55338950ef97dfe3746796b5
      size: 2143518
    - path: src/flare_classifier/mlp_model.py
      md5: 43587811c5951e16b0052b1c7e7ad3fc
      size: 1497
    - path: src/flare_classifier/prepare_datasets.py
      md5: 9e5becc6bad1d41590dcb599823f2539
      size: 1705
    - path: src/flare_classifier/train_mlp.py
      md5: da8d5e43359cd9e2e834e96f2a4ffe10
      size: 3938
    params:
      params.yaml:
        train_mlp.batch_size: 1024
        train_mlp.lr: 0.001
        train_mlp.num_epochs: 150
    outs:
    - path: models/mlp/mlp.pickle
      md5: 7e8f33c9984f97ef3a95b5a03b452593
      size: 894651
  evaluate_rf:
    cmd: python src/flare_classifier/evaluate_rf.py models/random_forest/random_forest.pickle
      data/prepared/ data/light-curves/real_flares_test.csv
    deps:
    - path: data/light-curves/real_flares_test.csv
      md5: 41549f4174fdd29bfd6d4a1f71d17b6e
      size: 682093
    - path: data/prepared/test.parquet
      md5: 4e191b4624c9a381c963b407e639089a
      size: 2140708
    - path: data/prepared/train.parquet
      md5: b61cc38b97c5fa5a5d8c3159881b4d50
      size: 11172253
    - path: models/random_forest/random_forest.pickle
      md5: 8ca4eb1b14d9bc2a0b5667eb492cf4c7
      size: 6932370
    - path: src/flare_classifier/evaluate_rf.py
      md5: df02bd5c788e111f47ccde98f17fe098
      size: 1896
    - path: src/flare_classifier/metrics.py
      md5: 457e5451b5b86205f52279732ec9c610
      size: 1535
    - path: src/flare_classifier/train_rf.py
      md5: 9f2cc06022f46bf2ed731ccee4fa39a7
      size: 1019
    outs:
    - path: metrics/random_forest/test_metrics.json
      md5: 8c0f47c9a6c33bd7126558a01c53e568
      size: 135
    - path: metrics/random_forest/train_metrics.json
      md5: 45b3ed18b00cf9e86a848d0c26a6c0cf
      size: 121
  evaluate_catboost:
    cmd: python src/flare_classifier/evaluate_catboost.py models/catboost/catboost.pickle
      data/prepared/ data/light-curves/real_flares_test.csv
    deps:
    - path: data/light-curves/real_flares_test.csv
      md5: 41549f4174fdd29bfd6d4a1f71d17b6e
      size: 682093
    - path: data/prepared/test.parquet
      md5: 4e191b4624c9a381c963b407e639089a
      size: 2140708
    - path: data/prepared/train.parquet
      md5: b61cc38b97c5fa5a5d8c3159881b4d50
      size: 11172253
    - path: models/catboost/catboost.pickle
      md5: 01bc42abaab236acb59a0b2aeb370138
      size: 3706978
    - path: src/flare_classifier/evaluate_catboost.py
      md5: 8aa797d7f3f56c7e318b968993e18e3b
      size: 1894
    - path: src/flare_classifier/metrics.py
      md5: 457e5451b5b86205f52279732ec9c610
      size: 1535
    - path: src/flare_classifier/train_catboost.py
      md5: bc305b7544427c9b0d4887e7e83d6d4c
      size: 1539
    outs:
    - path: metrics/catboost/test_metrics.json
      md5: e4f7168d410ac3224a1c76d16887f46f
      size: 136
    - path: metrics/catboost/train_metrics.json
      md5: 666de043b107dc2d40a16ae9e8ad6049
      size: 136
  evaluate_mlp:
    cmd: python src/flare_classifier/evaluate_mlp.py models/mlp/mlp.pickle data/prepared/
      data/light-curves/real_flares_test.csv
    deps:
    - path: data/light-curves/real_flares_test.csv
      md5: 41549f4174fdd29bfd6d4a1f71d17b6e
      size: 682093
    - path: data/prepared/test.parquet
      md5: 4e191b4624c9a381c963b407e639089a
      size: 2140708
    - path: data/prepared/train.parquet
      md5: b61cc38b97c5fa5a5d8c3159881b4d50
      size: 11172253
    - path: models/mlp/mlp.pickle
      md5: 7e8f33c9984f97ef3a95b5a03b452593
      size: 894651
    - path: src/flare_classifier/evaluate_mlp.py
      md5: 4a47f1358f7c522feeae26aa0567bda6
      size: 3107
    - path: src/flare_classifier/metrics.py
      md5: 457e5451b5b86205f52279732ec9c610
      size: 1535
    - path: src/flare_classifier/train_mlp.py
      md5: da8d5e43359cd9e2e834e96f2a4ffe10
      size: 3938
    outs:
    - path: metrics/mlp/test_metrics.json
      md5: 5f574ae929a45243581613b4c4a35e0a
      size: 136
    - path: metrics/mlp/train_metrics.json
      md5: ee3e7d642aaf7a199e4ea8ce82c110f5
      size: 136
